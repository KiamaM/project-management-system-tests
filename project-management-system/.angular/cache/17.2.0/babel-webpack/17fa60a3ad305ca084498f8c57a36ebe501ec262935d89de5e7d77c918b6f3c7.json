{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { Router, RouterLink, RouterOutlet } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { AuthService } from '../../../src/Services/auth.service';\nimport { NavBarComponent } from '../navbar/navbar.component';\nlet LoginComponent = class LoginComponent {\n  constructor(router, authservice) {\n    this.router = router;\n    this.authservice = authservice;\n    this.visible = false;\n    this.visible2 = false;\n  }\n  login(details) {\n    console.log(details);\n    this.authservice.loginUser(details).subscribe(res => {\n      console.log(res);\n      if (res.error) {\n        this.visible = true;\n        this.errorMsg = res.error;\n        setTimeout(() => {\n          this.visible = false;\n        }, 3000);\n      } else if (res.message) {\n        this.visible2 = true;\n        this.successMsg = res.message;\n        setTimeout(() => {\n          this.visible2 = false;\n        }, 3000);\n        localStorage.setItem('token', res.token);\n        // console.log(res.token);\n        let newToken = localStorage.getItem('token');\n        console.log(newToken);\n        this.authservice.readToken(newToken).subscribe(res => {\n          console.log(res);\n          setTimeout(() => {\n            this.visible2 = false;\n            console.log(res.info.email);\n            if (res.info.email == 'muriithikiamad1+1@gmail.com') {\n              localStorage.setItem('admin', 'admin');\n              this.router.navigate(['dashboard']);\n            } else {\n              this.router.navigate(['']);\n            }\n          }, 2000);\n        });\n      }\n    });\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: Router\n  }, {\n    type: AuthService\n  }];\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [ReactiveFormsModule, CommonModule, RouterOutlet, RouterLink, NavBarComponent],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"names":["Component","ReactiveFormsModule","Router","RouterLink","RouterOutlet","CommonModule","AuthService","NavBarComponent","LoginComponent","constructor","router","authservice","visible","visible2","login","details","console","log","loginUser","subscribe","res","error","errorMsg","setTimeout","message","successMsg","localStorage","setItem","token","newToken","getItem","readToken","info","email","navigate","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0"],"sources":["E:\\QAQE\\Recent Projects\\Project Management System ng\\project-management-system\\src\\Components\\login\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { Router, RouterLink, RouterOutlet } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AuthService } from '../../../src/Services/auth.service';\r\nimport { NavBarComponent } from '../navbar/navbar.component';\r\nimport { loginUserDetails } from '../../../src/Interfaces/user.interface';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  standalone: true,\r\n  imports: [ReactiveFormsModule, CommonModule, RouterOutlet, RouterLink, NavBarComponent],\r\n  templateUrl: './login.component.html',\r\n  styleUrl: './login.component.css'\r\n})\r\nexport class LoginComponent {\r\n  errorMsg!:string\r\n  successMsg!:string\r\n\r\n  visible = false\r\n  visible2 = false\r\n\r\n  constructor(private router:Router, private authservice:AuthService ){}\r\n\r\n  login(details:loginUserDetails){\r\n    console.log(details);\r\n\r\n    this.authservice.loginUser(details).subscribe(res=>{\r\n      console.log(res);\r\n      \r\n      if(res.error){\r\n        this.visible = true\r\n        this.errorMsg = res.error\r\n\r\n        setTimeout(() => {\r\n          this.visible = false\r\n        }, 3000);\r\n      }else if(res.message){\r\n        this.visible2 = true\r\n        this.successMsg = res.message\r\n\r\n        setTimeout(() => {\r\n          this.visible2 = false\r\n        }, 3000);\r\n\r\n        localStorage.setItem('token', res.token)\r\n\r\n        // console.log(res.token);\r\n        \r\n        let newToken = localStorage.getItem('token') as string\r\n        console.log(newToken);\r\n        \r\n\r\n        this.authservice.readToken(newToken).subscribe(res=>{\r\n          console.log(res);\r\n\r\n          setTimeout(() => {\r\n            this.visible2 = false\r\n            console.log(res.info.email);\r\n            \r\n            \r\n            if(res.info.email == 'muriithikiamad1+1@gmail.com'){\r\n\r\n              localStorage.setItem('admin', 'admin')\r\n              \r\n              this.router.navigate(['dashboard'])\r\n            }else{\r\n              this.router.navigate([''])\r\n            }\r\n          }, 2000);\r\n        })\r\n\r\n        \r\n      }\r\n    })\r\n\r\n\r\n\r\n    \r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n"],"mappings":";;;AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAiCC,mBAAmB,QAAoB,gBAAgB;AACxF,SAASC,MAAM,EAAEC,UAAU,EAAEC,YAAY,QAAQ,iBAAiB;AAClE,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,oCAAoC;AAChE,SAASC,eAAe,QAAQ,4BAA4B;AAUrD,IAAMC,cAAc,GAApB,MAAMA,cAAc;EAOzBC,YAAoBC,MAAa,EAAUC,WAAuB;IAA9C,KAAAD,MAAM,GAANA,MAAM;IAAiB,KAAAC,WAAW,GAAXA,WAAW;IAHtD,KAAAC,OAAO,GAAG,KAAK;IACf,KAAAC,QAAQ,GAAG,KAAK;EAEqD;EAErEC,KAAKA,CAACC,OAAwB;IAC5BC,OAAO,CAACC,GAAG,CAACF,OAAO,CAAC;IAEpB,IAAI,CAACJ,WAAW,CAACO,SAAS,CAACH,OAAO,CAAC,CAACI,SAAS,CAACC,GAAG,IAAE;MACjDJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC;MAEhB,IAAGA,GAAG,CAACC,KAAK,EAAC;QACX,IAAI,CAACT,OAAO,GAAG,IAAI;QACnB,IAAI,CAACU,QAAQ,GAAGF,GAAG,CAACC,KAAK;QAEzBE,UAAU,CAAC,MAAK;UACd,IAAI,CAACX,OAAO,GAAG,KAAK;QACtB,CAAC,EAAE,IAAI,CAAC;OACT,MAAK,IAAGQ,GAAG,CAACI,OAAO,EAAC;QACnB,IAAI,CAACX,QAAQ,GAAG,IAAI;QACpB,IAAI,CAACY,UAAU,GAAGL,GAAG,CAACI,OAAO;QAE7BD,UAAU,CAAC,MAAK;UACd,IAAI,CAACV,QAAQ,GAAG,KAAK;QACvB,CAAC,EAAE,IAAI,CAAC;QAERa,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEP,GAAG,CAACQ,KAAK,CAAC;QAExC;QAEA,IAAIC,QAAQ,GAAGH,YAAY,CAACI,OAAO,CAAC,OAAO,CAAW;QACtDd,OAAO,CAACC,GAAG,CAACY,QAAQ,CAAC;QAGrB,IAAI,CAAClB,WAAW,CAACoB,SAAS,CAACF,QAAQ,CAAC,CAACV,SAAS,CAACC,GAAG,IAAE;UAClDJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC;UAEhBG,UAAU,CAAC,MAAK;YACd,IAAI,CAACV,QAAQ,GAAG,KAAK;YACrBG,OAAO,CAACC,GAAG,CAACG,GAAG,CAACY,IAAI,CAACC,KAAK,CAAC;YAG3B,IAAGb,GAAG,CAACY,IAAI,CAACC,KAAK,IAAI,6BAA6B,EAAC;cAEjDP,YAAY,CAACC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC;cAEtC,IAAI,CAACjB,MAAM,CAACwB,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;aACpC,MAAI;cACH,IAAI,CAACxB,MAAM,CAACwB,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;;UAE9B,CAAC,EAAE,IAAI,CAAC;QACV,CAAC,CAAC;;IAIN,CAAC,CAAC;EAKJ;EAAC,QAAAC,CAAA,G;;;;;;AAhEU3B,cAAc,GAAA4B,UAAA,EAP1BpC,SAAS,CAAC;EACTqC,QAAQ,EAAE,WAAW;EACrBC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAACtC,mBAAmB,EAAEI,YAAY,EAAED,YAAY,EAAED,UAAU,EAAEI,eAAe,CAAC;EACvFiC,QAAA,EAAAC,oBAAqC;;CAEtC,CAAC,C,EACWjC,cAAc,CAiE1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}